package com.section2;

import java.sql.Timestamp;
import java.util.UUID;

public class MainClass {
	public static void main(String[] args) throws Exception {
		// TODO Auto-generated method stub
		//Section 2 Initiate 3 instance 
		Account acc1 = new Account("Freddy Mercury", 1000);
		Account acc2 = new Account("John McAfee", 2000);
		Account acc3 = new Account("Elon Musk", 3000);
		System.out.println(acc1.toStr());
		System.out.println(acc2.toStr());
		System.out.println(acc3.toStr());

		
		
		
		System.out.println(acc1.toStr(user2));
		acc3.deposit(user2, 6000);
		System.out.println(acc1.toStr(user2));
		System.out.println("Acc2 before set :");
//		acc3.setBalance(10000);
//		acc3.transfer(user2, 500);
		System.out.println(acc1.toStr(user2));


	}

	static class Self {
		private int count = 0;
		public Self(String name, double balance) {
			this.id = count++;
			this.name = name;
			this.balance = balance;
		}

		private int id;
		private String name;
		private double balance;

		public int getId() {
			return id;
		}

		public void setId(int id) {
			this.id = id;
		}

		public String getName() {
			return name;
		}

		public void setName(String name) {
			this.name = name;
		}

		public double getBalance() {
			return balance;
		}

		public void setBalance(double balance) {
			this.balance = balance;
		}
	}

	static class Account {
		private Self user;
		private double balance;
		public Account(String name, double balance) {
			this.user = new Self(name);
		}
		
		public void deposit(double amount) {
			user.setBalance(user.getBalance()+amount);
		}
		public void withdraw(double amount) throws Exception {
			if(user.getBalance()<amount) throw new Exception("Balance is not enough. ");
			user.setBalance(user.getBalance()-amount);
		}
		public String toStr() {
			return user.name + "'s account. Balance: "+user.balance;
		}
	}
	
	static class DevAccount extends Account{
		public DevAccount(String name, double balance) {
			super(name, balance);
		}
		
		public double getBalance() {
			return super.user.getBalance();
		}
		
		public void setBalance(double balance) {
			super.user.setBalance(balance);
		}
		
		public void transfer(Account receipientAccount, double amount) throws Exception{
			this.withdraw(amount);
			receipientAccount.deposit(amount);
		}
		
		
	}

}
